using System.Collections.Generic;
using UnityEngine;

[CreateAssetMenu(fileName = "ObstacleFactorySO", menuName = "Factory/ObstacleFactorySO")]
public class ObstacleFactorySO : FactoryVarianceSO<Obstacle, int>
{
    public EnviornmentSO EnviornmentSO;

    public override Patch Create(Patch key)
    {
        return Instantiate(key);
    }

    public override Dictionary<int, Stack<Patch>> CreateBatch(int copiesPerItem)
    {
        Dictionary<int, Stack<Patch>> keyValuePairs = new Dictionary<int, Stack<Patch>>();

        foreach (List<Patch> p in EnviornmentSO.envCategoryDictionary.Values)
        {
            for (int i = 0; i < p.Count; i++)
            {
                Stack<Patch> stack = new Stack<Patch>();

                for (int k = 0; k < copiesPerItem; k++)
                {
                    stack.Push(Instantiate(p[i]));
                }

                keyValuePairs.Add(p[i].GetInstanceID(), stack);
            }
        }

        return keyValuePairs;
    }
}